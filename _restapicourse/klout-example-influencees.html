---
layout: page
title: 'Klout example: Get influencees'
permalink: /docapis_klout-example-influencees/
categories:
- api-doc
tags: []
status: publish
type: notes_docapis
published: true
date: January 14, 2015
---
<p>Suppose I want to know who I have influenced. After all, this is what Klout is all about. Influence is measured by the action you drive. So who exactly am I influencing?</p>
<p>To get my influencees, I need to use the influence endpoint, passing in my Klout ID (which I retrieved using the identity.json/twitter endpoint as used in the <a href="http://idratherbewriting.com/klout-example-score">Klout example on retrieving a score</a>). My Klout ID is 1134760.</p>
<p>Here I plug in my Klout ID into the influence endpoint:</p>
<p><a href="http://developer.klout.com/io-docs"><img src="/images/influenceesendpoint-550x589.png" alt="influence endpoint" width="550" height="589" class="alignnone size-medium wp-image-22493" /></a></p>
<p>The response appears in the Response Body section.</p>
<p>Although the interactive console shows you the response, you can also submit the request via the browser and see the payload in the browser. Here's the request:</p>
<p><a href="http://api.klout.com/v2/user.json/1134760/influence?key=urgey4a79n5x6df6xx4p64dr">http://api.klout.com/v2/user.json/1134760/influence?key=urgey4a79n5x6df6xx4p64dr</a></p>
<p>And here's the response:</p>
<p>{% highlight html %}
{
   "myInfluencers":[
      {
         "entity":{
            "id":"1247152",
            "payload":{
               "kloutId":"1247152",
               "nick":"maxwellhoffmann",
               "score":{
                  "score":58.96268054394578,
                  "bucket":"50-59"
               },
               "scoreDeltas":{
                  "dayChange":-0.06646433497560622,
                  "weekChange":-0.6916024495036766,
                  "monthChange":-3.064438643695368
               }
            }
         }
      },
      {
         "entity":{
            "id":"704001",
            "payload":{
               "kloutId":"704001",
               "nick":"scottabel",
               "score":{
                  "score":58.46798823414681,
                  "bucket":"50-59"
               },
               "scoreDeltas":{
                  "dayChange":-0.11132545485078538,
                  "weekChange":-0.43572069638905475,
                  "monthChange":-2.6085841408238792
               }
            }
         }
      },
      {
         "entity":{
            "id":"34254",
            "payload":{
               "kloutId":"34254",
               "nick":"SkeeterHarris",
               "score":{
                  "score":56.77425322747173,
                  "bucket":"50-59"
               },
               "scoreDeltas":{
                  "dayChange":-0.11454920647811662,
                  "weekChange":0.04889146674855738,
                  "monthChange":-0.5583258470292165
               }
            }
         }
      },
      {
         "entity":{
            "id":"946127",
            "payload":{
               "kloutId":"946127",
               "nick":"WritingTechDocs",
               "score":{
                  "score":46.61038545204223,
                  "bucket":"40-49"
               },
               "scoreDeltas":{
                  "dayChange":-0.05709675920967072,
                  "weekChange":-0.610875962222579,
                  "monthChange":0.1813057349656475
               }
            }
         }
      },
      {
         "entity":{
            "id":"538063",
            "payload":{
               "kloutId":"538063",
               "nick":"benwoelk",
               "score":{
                  "score":46.57106330020806,
                  "bucket":"40-49"
               },
               "scoreDeltas":{
                  "dayChange":0.00041549774290672303,
                  "weekChange":-0.1646010755193359,
                  "monthChange":-1.030068829042456
               }
            }
         }
      }
   ],
   "myInfluencees":[
      {
         "entity":{
            "id":"30399302251467350",
            "payload":{
               "kloutId":"30399302251467350",
               "nick":"shweta_hardikar",
               "score":{
                  "score":47.43871175313726,
                  "bucket":"40-49"
               },
               "scoreDeltas":{
                  "dayChange":-0.009049927092938503,
                  "weekChange":-0.6219719932282644,
                  "monthChange":-3.7916465630982046
               }
            }
         }
      },
      {
         "entity":{
            "id":"57420900014448388",
            "payload":{
               "kloutId":"57420900014448388",
               "nick":"healcomm",
               "score":{
                  "score":42.719218288006516,
                  "bucket":"40-49"
               },
               "scoreDeltas":{
                  "dayChange":-0.44535971136188124,
                  "weekChange":-1.3102052073242874,
                  "monthChange":-2.578499929496701
               }
            }
         }
      },
      {
         "entity":{
            "id":"45598950992256021",
            "payload":{
               "kloutId":"45598950992256021",
               "nick":"DavidEgyes",
               "score":{
                  "score":41.087978297965485,
                  "bucket":"40-49"
               },
               "scoreDeltas":{
                  "dayChange":0.001295312050686448,
                  "weekChange":0.3330133541551774,
                  "monthChange":0.9188803888604156
               }
            }
         }
      },
      {
         "entity":{
            "id":"45880425968882520",
            "payload":{
               "kloutId":"45880425968882520",
               "nick":"napnam",
               "score":{
                  "score":40.50583674531803,
                  "bucket":"40-49"
               },
               "scoreDeltas":{
                  "dayChange":0.00011879239579570822,
                  "weekChange":-0.15131948958799057,
                  "monthChange":-0.3625057602583581
               }
            }
         }
      },
      {
         "entity":{
            "id":"29554883011845256",
            "payload":{
               "kloutId":"29554883011845256",
               "nick":"LeviathanMcKrac",
               "score":{
                  "score":39.986255014100266,
                  "bucket":"30-39"
               },
               "scoreDeltas":{
                  "dayChange":-0.02143362442675567,
                  "weekChange":-0.8744516124100628,
                  "monthChange":-0.4536137313422586
               }
            }
         }
      }
   ],
   "myInfluencersCount":8,
   "myInfluenceesCount":24
}
{% endhighlight %}</p>
<p>The <code>myInfluencers</code> object has various properties. (By the way, inside a JSON object, square brackets denote an array. Curly braces denote another object. Here influencees are listed as an array of <code>entity</code> objects.)</p>
<p>Stylewise here, I'm using the <a href="https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa?hl=en">JSON Formatting extension for Chrome</a> to format the JSON, but to copy and paste the JSON and keep the indentation, I use the <a href="http://jsonformatter.curiousconcept.com/">JSON Formatter &amp; Validator</a>.</p>
<p>This JSON payload contains all of my influencees, but it contains a lot of extra information. I just want a short list of Twitter names with their links.</p>
<p>Using jQuery, I can iterate through the JSON payload and pull out the information that I want:</p>
<p>{% highlight html %}
<html>
<body></p>
<p><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script></p>
<p><script>
 // get influencees
     var url = "http://api.klout.com/v2/user.json/1134760/influence?key={your api key}&amp;callback=?";
    $.getJSON( url, function( data ) {
    	console.log(data);</p>
<p>    $.each( data.myInfluencees, function( i, inf ) {
    $("#kloutInf").append('<li><a href="http://twitter.com/'+inf.entity.payload.nick + '">' + inf.entity.payload.nick + '</a></li>');</p>
<p>  });
});
</script></p>
<p><h2>My influencees</h2>
<ul id="kloutInf"></ul></p>
<p></body>
</html>
{% endhighlight %}</p>
<p>The result looks like this:</p>
<p><a href="http://idratherbetellingstories.com/wp-content/apidemos/klout.html"><img src="/images/influenceesdemo-550x292.png" alt="influencees demo" width="550" height="292" class="alignnone size-medium wp-image-22494" /></a></p>
<p>Here's <a href="http://idratherbetellingstories.com/wp-content/apidemos/klout_influence.html">the demo</a>.</p>
<p>(If you don't see anything, your firewall may be blocking Klout.)</p>
<h2>Code explanation</h2>
<p>The code uses the <code>getJSON</code> method from jQuery to get a JSON payload for a specific URL. It assigns this payload to the <code>data</code> argument. The <code>console.log(data)</code> code just logs the payload to the console to make it easy to inspect.</p>
<p>The jQuery <code>each</code> method iterates through each property in the <code>data.myInfluencees</code> object. It renames this object <code>inf</code> (you can choose whatever names you want) and then gets the <code>entity.payload.nick</code> property for each item in the object. It inserts this value into a link to the Twitter profile, and then appends the information to a specific tag on the page (<code>#kloutInf</code>).</p>
