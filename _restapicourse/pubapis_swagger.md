---
title: "Swagger"
permalink: /pubapis_swagger/
course: "Documenting REST APIs"
type: notes_docapis
weight: 5.4
---
{% include notes.html %}

## About Swagger

Swagger is one of the most popular specifications for REST APIs for a number of reasons:

* Swagger generates an interactive API console for people to quickly learn about and try the API.
* Swagger generates the client SDK code needed for implementations on various platforms.
* The Swagger file can be auto-generated from code annotations on a lot of different platforms.
* Swagger has a strong community with helpful contributors.

The Swagger spec provides a way to describe your API using a specific JSON or YAML schema that outlines the names, order, and other details of the API. 

You can code this Swagger file by hand in a text editor, or you can auto-generate it from annotations in your source code. Different tools can consume the Swagger file to generate the interactive API documentation.

{{note}} The interactive API documentation generated by the Swagger file is minimal. It shows the resources, parameters, requests, and responses. However, it's not going to provide any other detail about how your API works.{{end}}

## The Swagger Petstore example

In order to get a better understanding of Swagger, let's explore the Petstore example.

<a href="http://petstore.swagger.io/"><img src="{{ "/images/restapicourse/swaggerpetstoreui.png" | prepend: site.baseurl }}" alt="" /></a>

There are three resources: pet, store, and user. 

### Create a pet
{{activity}}
1. In the **Pet** resource, expand the **Post** method. 
2. Click the yellow JSON in the Model Schema section:
	
	<img src="{{ "/images/restapicourse/petstorepostpet.png" | prepend: site.baseurl }}" alt="Posting a new pet" />
	
	This populates the body value with the JSON. This is the JSON you must submit in order to create a pet. 
	
3. Change the value for the first `id` tag. (Make it really unique so that others don't use the same `id`.)
4. Change `name` value to something unique. Here's an example:
	
	```json
	{
	  "id": 37987,
	  "category": {
	    "id": 0,
	    "name": "string"
	  },
	  "name": "Mr. Fluffernutter",
	  "photoUrls": [
	    "string"
	  ],
	  "tags": [
	    {
	      "id": 0,
	      "name": "string"
	    }
	  ],
	  "status": "available"
	}
	```
5. Click the **Try it out!** button.
	
	Look and see the response. 
	
	<img src="{{ "/images/restapicourse/swaggerpetstoreresponse.png" | prepend: site.baseurl }}" alt="JSON response" />

### Find your pet by the ID
{{activity}}
1. Expand the GET `pet/{petId}` method.
2. Insert your pet's ID in the `petId` value box.
3. Click **Try it out!**
	
	The pet you created is returned in the response. 
	
	By default, the response will be in XML. Change the **Response Content Type** selector to **application/json** and click **Try it out!** again. 
	
	The pet response is returned in JSON format.
	
{{important}} The emphasis in Swagger documentation is to learn by doing. You make real requests and see responses to better understand how the Petstore API really works. However, note also that now you have created a new pet in your actual Petstore database. This test data may be something you have to wipe clean when you transition from exploring and learning about the API to actually using the API for production use. {{end}}

## Sorting out the Swagger components

Swagger has a number of different pieces:

**[Swagger spec](https://github.com/swagger-api/swagger-spec)**: The Swagger spec is the official schema about name and element nesting, order, and so on. If you plan on hand-coding the Swagger files, you'll need to be extremely familiar with the Swagger spec.

**[Swagger editor](http://editor.swagger.io/#/)**: The Swagger Editor is an online editor that validates your YML-formatted content against the rules of the Swagger spec. YML is a syntax that depends on spaces and nesting. You'll need to be familiar with YML syntax and the rules of the Swagger spec to be successful here. The Swagger editor will flag errors and give you formatting tips. (Note that the Swagger spec file can be in either JSON or YAML format.)

<a href="http://editor.swagger.io/"><img src="{{ "/images/publishingapidocs/swagger-editor-example.png" | prepend: site.baseurl }}" alt="Swagger online editor" /></a>

**[Swagger-UI](https://github.com/swagger-api/swagger-ui)**: The Swagger UI is an HTML/CSS/JS framework that parses a JSON or YML file that follows the Swagger spec and generates a navigable UI of the documentation. This is the tool that transforms your spec into the Swagger Petstore-like UI output.

**[Swagger-codegen](https://github.com/swagger-api/swagger-codegen)**: This utility generates client SDK code for a lot of different platforms (such as Java, JavaScript, Scala, Python, PHP, Ruby, Scala, and more). This client code helps developers integrate your API on a specific platform and provides for more robust implementations that might include more scaling, threading, and other necessary code. An SDK is supportive tooling that helps developers use the REST API.

## Some sample Swagger implementations

Before we get into this tutorial, check out a few Swagger implementations:

* [Reverb](https://reverb.com/swagger#!/accounts)
* [VocaDB](http://vocadb.net/swagger/ui/index)
* [Watson Developer Cloud](http://www.ibm.com/smarterplanet/us/en/ibmwatson/developercloud/apis/)

Most of them look pretty much the same, with minimal branding. You'll notice the documentation is short and sweet in a Swagger implementation. This is because the Swagger display is meant to be an interactive experience where you can try out calls and see responses &mdash; using your own API key to see your own data. It's the learn-by-doing-and-seeing-it approach.

Note a few limitations with the Swagger approach: 

* There's not much room to describe in detail the workings of the endpoint.
* The Swagger UI looks mostly the same for each output.
* The Swagger UI will be a separate site from your other documentation.

## Create a Swagger UI display
{{activity}}
In this activity, you'll create a Swagger UI display for the weatherdata endpoint in this [Mashape Weather API](https://www.mashape.com/fyhao/weather-13#weatherdata). (If you're jumping around in the documentation, this is a simple API that we used in earlier parts of the course.) You can see a demo of what we'll build [here](http://learnapidoc.com/swagger/tom):

<a href="http://learnapidoc.com/swagger/tom"><img src="{{ "/images/restapicourse/myswagger.png" | prepend: site.baseurl }}" alt="Swagger UI demo" /></a>

### a. Create a Swagger spec file
{{activity}}
To create a Swagger spec file:

1. Go to the [Swagger online editor](http://editor.swagger.io/#/).
2. Select **File > Open Example** and choose **PetStore Simple**. Click **Open**.
	
	You could just customize this sample YML file with the weatherdata endpoint documentation. However, to save you some time, copy and paste the following into the Swagger editor:
	
	```yaml
	---
	  swagger: "2.0"
	  info: 
	    version: "1.0.0"
	    title: "Weather API"
	    description: "A sample API that uses a Mashape weather API as an example to demonstrate features in the swagger-2.0 specification"
	    termsOfService: "http://helloreverb.com/terms/"
	    contact: 
	      name: "Tom Johnson"
	      email: "tomjohnson1492@gmail.com"
	      url: "http://swagger.io"
	    license: 
	      name: "MIT"
	      url: "http://opensource.org/licenses/MIT"
	  host: "simple-weather.p.mashape.com"
	  schemes: 
	    - "https"
	  consumes: 
	    - "application/json"
	  produces: 
	    - "application/text"
	  paths: 
	    /aqi: 
	      get: 
	        tags: 
	          - "Air Quality"
	        description: "gets air quality index"
	        operationId: "getAqi"
	        produces: 
	          - "text"
	        parameters: 
	          - 
	            name: "lat"
	            in: "query"
	            description: "latitude"
	            required: false
	            type: "string"
	          - 
	            name: "lng"
	            in: "query"
	            description: "longitude"
	            required: false
	            type: "string"
	        responses: 
	          200: 
	            description: "aqi response"
	          default: 
	            description: "unexpected error"
	    /weather: 
	      get: 
	        tags: 
	          - "Weather Forecast"
	        description: "gets weather forecast in short label"
	        operationId: "getWeather"
	        produces: 
	          - "text"
	        parameters: 
	          - 
	            name: "lat"
	            in: "query"
	            description: "latitude"
	            required: false
	            type: "string"
	          - 
	            name: "lng"
	            in: "query"
	            description: "longitude"
	            required: false
	            type: "string"
	        responses: 
	          200: 
	            description: "weather response"
	          default: 
	            description: "unexpected error"
	    /weatherdata: 
	      get: 
	        tags: 
	          - "Full Weather Data"
	        description: "Get weather forecast by Latitude and Longitude"
	        operationId: "getWeatherData"
	        produces: 
	          - "application/json"
	        parameters: 
	          - 
	            name: "lat"
	            in: "query"
	            description: "latitude"
	            required: false
	            type: "string"
	          - 
	            name: "lng"
	            in: "query"
	            description: "longitude"
	            required: false
	            type: "string"
	        responses: 
	          200: 
	            description: "weatherdata response"
	          default: 
	            description: "unexpected error"
	```
	
	{{note}} Notice that this is YML instead of JSON. YML syntax is a more human-readable form of JSON. With YML, spacing matters! New levels are set with two indented spaces. The colon indicates an object. Hyphens represent a sequence or list (like an array).{{end}}
	
	The Swagger editor shows you how the file will look in the output. You'll also be able to see if there are any validity errors. Without this online editor, you would only know that the YML syntax is valid when you run the code (and see errors indicating that the YAML file couldn't be parsed).
	
3. Go to **File > Download YAML** and save the file as "swagger.yaml" on your computer.

You can also choose JSON, but YAML is more readable and works just as well.

### b. Set Up the Swagger UI
{{activity}}
1. Download [Swagger UI](https://github.com/swagger-api/swagger-ui) by clicking the **Download ZIP** button. Download the files to a convenient location on your computer and extract the files.
	
	The only folder you'll be working with here is the dist folder. Everything else is used only if you're regenerating the files. 
	
2. Drag the dist folder out of the swagger-ui-master folder.
3. Inside your "dist" folder, open index.html. 
4. Look for the following code:
	
	```js
	$(function () {
	  var url = window.location.search.match(/url=([^&]+)/);
	  if (url && url.length > 1) {
	    url = decodeURIComponent(url[1]);
	  } else {
	    url = "http://petstore.swagger.io/v2/swagger.json";
	  }
	```
5. Change the `url` value from `http://petstore.swagger.io/v2/swagger.json` to the following: `"swagger.json";`.
	
	
6. The Mashape API also requires a header authorization, so you'll need to make another change.  Scroll down the index.html file until you find the `addApiKeyAuthorization` function:
	
	```js
      function addApiKeyAuthorization(){
        var key = encodeURIComponent($('#input_apiKey')[0].value);
        if(key && key.trim() != "") {
            var apiKeyAuth = new SwaggerClient.ApiKeyAuthorization("api_key", key, "query");
            window.swaggerUi.api.clientAuthorizations.add("api_key", apiKeyAuth);
            log("added key " + key);
        }
	```
	
	Change the line ` window.swaggerUi.api.clientAuthorizations.add("api_key", apiKeyAuth);` to `("X-Mashape-Key", "{api key}", "header"));`, so that it looks like this:
	
	```js
	      function addApiKeyAuthorization(){
	        var key = encodeURIComponent($('#input_apiKey')[0].value);
	        if(key && key.trim() != "") {
	            var apiKeyAuth = new SwaggerClient.ApiKeyAuthorization("api_key", key, "query");
	            swaggerUi.api.clientAuthorizations.add("key", new SwaggerClient.ApiKeyAuthorization("X-Mashape-Key", "{api key}", "header"));
	            log("added key " + key);
	        }
	```
	
	Insert your API key in `{api key}`. Otherwise users wil have to enter their own API keys.
	
7. Uncomment out following lines here by removing the `/*` and `*/`:
	
	```js
	// if you have an apiKey you would like to pre-populate on the page for demonstration purposes...
	  /*
	    var apiKey = "{api key}";
	    $('#input_apiKey').val(apiKey);
	  */
	```
	
8. Add in your API key into this section:
	
	```js
	var apiKey = "{api key}";
	$('#input_apiKey').val(apiKey);    
	```
	
9. Save the file.
10. Drag the **swagger.json** file that you created earlier into the same directory as the index.html file you just edited.
	
If the previous instructions were confusing, just copy the following code and replace your entire index.html file with it. The only thing you'll need to customize is the `var apiKey = "{api key}";`. Replace `{api key}` in a couple of places with your own API key for Mashape.

```html

<!DOCTYPE html>
<html>
<head>
  <title>Swagger UI</title>
  <link rel="icon" type="image/png" href="images/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="images/favicon-16x16.png" sizes="16x16" />
  <link href='css/typography.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='css/reset.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='css/screen.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='css/reset.css' media='print' rel='stylesheet' type='text/css'/>
  <link href='css/print.css' media='print' rel='stylesheet' type='text/css'/>
  <script src='lib/jquery-1.8.0.min.js' type='text/javascript'></script>
  <script src='lib/jquery.slideto.min.js' type='text/javascript'></script>
  <script src='lib/jquery.wiggle.min.js' type='text/javascript'></script>
  <script src='lib/jquery.ba-bbq.min.js' type='text/javascript'></script>
  <script src='lib/handlebars-2.0.0.js' type='text/javascript'></script>
  <script src='lib/underscore-min.js' type='text/javascript'></script>
  <script src='lib/backbone-min.js' type='text/javascript'></script>
  <script src='swagger-ui.js' type='text/javascript'></script>
  <script src='lib/highlight.7.3.pack.js' type='text/javascript'></script>
  <script src='lib/marked.js' type='text/javascript'></script>
  <script src='lib/swagger-oauth.js' type='text/javascript'></script>

  <script type="text/javascript">
    $(function () {
      var url = window.location.search.match(/url=([^&]+)/);
      if (url && url.length > 1) {
        url = decodeURIComponent(url[1]);
      } else {
        url = "swagger.json";
      }
      window.swaggerUi = new SwaggerUi({
        url: url,
        dom_id: "swagger-ui-container",
        supportedSubmitMethods: ['get', 'post', 'put', 'delete', 'patch'],
        onComplete: function(swaggerApi, swaggerUi){
          if(typeof initOAuth == "function") {
            initOAuth({
              clientId: "your-client-id",
              realm: "your-realms",
              appName: "your-app-name"
            });
          }

          $('pre code').each(function(i, e) {
            hljs.highlightBlock(e)
          });

          addApiKeyAuthorization();
        },
        onFailure: function(data) {
          log("Unable to Load SwaggerUI");
        },
        docExpansion: "none",
        apisSorter: "alpha",
        showRequestHeaders: false
      });

      function addApiKeyAuthorization(){
        var key = encodeURIComponent($('#input_apiKey')[0].value);
        if(key && key.trim() != "") {
            var apiKeyAuth = new SwaggerClient.ApiKeyAuthorization("api_key", key, "query");
            //window.swaggerUi.api.clientAuthorizations.add("api_key", apiKeyAuth);
            swaggerUi.api.clientAuthorizations.add("key", new SwaggerClient.ApiKeyAuthorization("X-Mashape-Key", "{api key}", "header"));
            log("added key " + key);
        }
      }

      $('#input_apiKey').change(addApiKeyAuthorization);

      // if you have an apiKey you would like to pre-populate on the page for demonstration purposes...
      
        var apiKey = "{api key}";
        $('#input_apiKey').val(apiKey);
      

      window.swaggerUi.load();

      function log() {
        if ('console' in window) {
          console.log.apply(console, arguments);
        }
      }
  });
  </script>
</head>

<body class="swagger-section">
<div id='header'>
  <div class="swagger-ui-wrap">
    <a id="logo" href="http://swagger.io">swagger</a>
    <form id='api_selector'>
      <div class='input'><input placeholder="http://example.com/api" id="input_baseUrl" name="baseUrl" type="text"/></div>
      <div class='input'><input placeholder="api_key" id="input_apiKey" name="apiKey" type="text"/></div>
      <div class='input'><a id="explore" href="#">Explore</a></div>
    </form>
  </div>
</div>

<div id="message-bar" class="swagger-ui-wrap">&nbsp;</div>
<div id="swagger-ui-container" class="swagger-ui-wrap"></div>
</body>
</html>
```

### c. Upload the Files to a Web Host
{{activity}}
You can't view the Swagger UI display locally &mdash; you must view it on a web server. If you already have a web server, great. Just upload the dist folder there and view it. 

You can also run a web server locally on your computer. 

1. Download and install [XAMPP](https://www.apachefriends.org/). 
2. Start XAMPP and open the **Manage Servers** tab in the console manager.
3. Select **Apache Web Server** and click **Start**.
4. Open the htdocs folder where XAMPP was installed. On a Mac, the location is usually in /Applications/XAMPP/xamppfiles/htdocs. 
5. Drag the dist folder into this space.
6. In your browser, go to localhost/dist. 

The Swagger UI display should appear.
	
### Interact with the Swagger UI
{{activity}}
1. Go to Google Maps and search for an address.
2. Get the latitude and longitude from the URL, and plug it into your Swagger UI. (For example, 37.3708905, -121.9675525 is Santa Clara, California.)
3. Click **Try it out**.
	
	If successful, you should see something in the response body like this:
	
	```
	17 c, Partly Cloudy at Santa Clara, United States
	```
	
	Try working with each of your endpoints and see the data that gets returned.

## Auto-generating the Swagger file from code annotations

Instead of coding the Swagger file by hand, you can also auto-generate it from annotations in your programming code. There are many Swagger libraries for integrating with different code bases. These Swagger libraries then parse the annotations that developers add and generate the same Swagger file that you produced manually using the earlier steps.

By integrating Swagger into the code, you allow developers to easily write documentation, make sure new features are always documented, and keep the documentation more current. Here's a [tutorial on annotating code with Swagger for Scalatra](http://www.infoq.com/articles/swagger-scalatra). The annotation methods for Swagger doc blocks vary based on the programming language.

For other tools and libraries, see [Swagger services and tools](http://swagger.io/open-source-integrations/).